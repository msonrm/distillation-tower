# 蒸留プロトタイプ

セル・オートマトン（カワサキダイナミクス）を使った液体シミュレーションのプロトタイプ。

## 目的

「加熱 → 沸騰 → 気化 → 冷却 → 凝縮 → 液体として垂れる」サイクルを実現するためのパラメータ調整を行う。

## 機能

- 100x100 グリッドのセルオートマトン
- 1種類の液体（水）と蒸気
- リアルタイムパラメータ調整:
  - 熱源温度
  - 冷却源温度
  - 沸点
  - 気化確率
  - 凝縮確率
  - 重力
  - 熱伝導率
  - 潜熱

## ローカル実行

```bash
npm install
npm run dev
```

http://localhost:3000 で確認。

## Vercelデプロイ

```bash
npx vercel
```

または GitHub リポジトリを Vercel に接続して自動デプロイ。

## 物理モデル

### エネルギー計算（ハミルトニアン）

```
E = E_重力 + E_結合 + E_界面

E_重力 = density × (gridHeight - y) × gravity
E_結合 = -cohesion × 0.5 × (同種隣接セル数)
E_界面 = Σ interfaceTension[type][neighbor] × 0.8
```

### 交換判定（メトロポリス法）

```
ΔE = E_交換後 - E_交換前
β = 1 / (localTemp × 0.1 + 1)

accept = ΔE < 0 ? true : random() < exp(-β × ΔE)
```

### 相転移

- **気化**: T > 沸点 のとき、確率 `(T - 沸点) / 50 × vaporizeRate` で液体→蒸気
- **凝縮**: T < 沸点 のとき、確率 `(沸点 - T) / 30 × condenseRate` で蒸気→液体

## 調整のポイント

1. **蒸気が上がらない**: 重力を下げる、蒸気の密度を下げる
2. **すぐ凝縮する**: 凝縮確率を下げる、冷却源温度を上げる
3. **沸騰しない**: 熱源温度を上げる、沸点を下げる
4. **熱が伝わらない**: 熱伝導率を上げる
