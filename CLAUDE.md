# Claude Code Project Instructions

## プロジェクト概要

「ザルバールの蒸留塔」— 温度ベースの蒸留パズルゲーム。
セル・オートマトン（カワサキダイナミクス）で液体の加熱・気化・冷却・凝縮を再現する。

## Session Start Checklist

各セッション開始時に以下を実行してください：

1. **必須**: main ブランチの最新を取得
   ```bash
   git fetch origin main && git merge origin/main --no-edit
   ```

2. **推奨**: `TODO.md` を確認
   - 実装予定・進行中のタスク
   - 設計方針・Deferred 項目

3. **推奨**: `SPEC.md` を確認
   - 製品仕様（ゲーム設計・物理モデル・技術方針）
   - リポジトリ運用ルール

4. **任意**: 最近の変更を把握したい場合は `CHANGELOG.md` を確認

## Working Guidelines

### 実装前の確認

**指示に不明点がある場合は、必ず明確にしてから実装に進むこと。**

- 曖昧な要件は推測せず、質問する
- 複数の解釈が可能な場合は、選択肢を提示して確認する
- 大きな変更の場合は、実装方針を先に説明して承認を得る

### コード変更時の注意

- ファイルを読む前に編集しない
- 古いキャッシュに注意（必要に応じて再読み込み）
- ビルド確認後にコミット

### 言語

- ドキュメント・コミットメッセージ: 日本語
- コード中のコメント・識別子: 英語

## Documentation

- `SPEC.md` - 製品仕様（ゲーム設計・物理モデル・技術方針・リポジトリ運用）
- `TODO.md` - 実装予定・進行中のタスク
- `CHANGELOG.md` - 変更履歴

機能実装完了時は TODO.md と CHANGELOG.md の両方を更新してください。

## 物理モデルの参照先

シミュレーションの物理モデル（エネルギー計算・メトロポリス法・潜熱モデル・熱伝導）は SPEC.md に記載。
Web版プロトタイプの実装詳細（デフォルトパラメータ・相互作用マトリックス等）は、本リポジトリが `distillation-tower` の場合 `PROTOTYPE.md` を参照。
